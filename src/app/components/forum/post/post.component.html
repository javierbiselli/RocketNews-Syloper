<div class="whole-container">
  <section *ngIf="selectedPost !== undefined">
    <div class="post-container">
      <div class="top-container">
        <h3>{{ selectedPost.title }}</h3>
        <div class="post-data-container">
          <img
            class="profile-picture"
            src="assets/profile-picture-default.png"
            alt=""
          />
          <div class="post-data">
            <p>
              on {{ selectedPost.date }} by
              <b>{{ selectedPost.author.name }}</b>
            </p>
            <p>~</p>
            <p>{{ selectedPost.comments.length }} comments</p>
          </div>
        </div>
      </div>
      <div class="post-content">
        <p>
          {{ selectedPost.content }}
        </p>
      </div>
      <div class="post-buttons">
        <button class="comment-button main-button">Comment</button>
        <button
          class="like-button secondary-button"
          [class.selected-button-green]="isLiked"
          (click)="toggleButton()"
        >
          <i class="fa-regular fa-heart"></i> Like
        </button>
      </div>
    </div>

    <div class="comments-order-container">
      <p>{{ selectedPost.comments.length }} comments</p>
      <select name="" id="" *ngIf="selectedPost.comments.length > 1">
        <option value="oldest">Newest</option>
        <option value="oldest">Oldest</option>
        <option value="oldest">Most likes</option>
      </select>
    </div>

    <div
      class="comments-container"
      *ngFor="let comment of selectedPost.comments"
    >
      <div class="comment-data-container">
        <img
          class="profile-picture"
          src="assets/profile-picture-default.png"
          alt=""
        />
        <div>
          <p>{{ comment.author.name }}</p>
          <p>{{ comment.date }}</p>
        </div>
      </div>
      <div class="comment-content">
        <p>
          {{ comment.content }}
        </p>
      </div>
      <div class="comment-bottom">
        <div class="comment-buttons-container">
          <button
            class="like-button secondary-button"
            [class.selected-button-green]="
              selectedButtons[comment.id] === 'add'
            "
            (click)="rate(comment, 1)"
          >
            <i class="fa-regular fa-thumbs-up"></i>
          </button>
          <p>{{ comment.rating > 0 ? "+" : "" }}{{ comment.rating }}</p>
          <button
            class="like-button secondary-button"
            [class.selected-button-red]="
              selectedButtons[comment.id] === 'subtract'
            "
            (click)="rate(comment, -1)"
          >
            <i class="fa-regular fa-thumbs-down"></i>
          </button>
        </div>
      </div>
    </div>
  </section>
  <app-paid-service></app-paid-service>
  <div *ngIf="selectedPost === undefined">404 NOT FOUND</div>
</div>
